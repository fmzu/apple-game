# 仕様書: りんご拾い

## 概要
落ちてくるりんごを左右移動で受け止め、スコアを伸ばすシングルプレイヤーのミニゲーム。
ミスが3回に達するとゲームオーバー。

## 対象環境
- Webブラウザ（デスクトップ想定）
- キーボード操作

## 操作
- 左移動: `ArrowLeft`
- 右移動: `ArrowRight`
- ゲーム開始: `Enter` / `Space`
- リスタート: `R`（ゲームオーバー時）

## ゲームルール
- りんごをキャッチすると種類に応じてスコア加算
- 地面に落ちたらミス +1
- ミスが3回でゲームオーバー

## スコア
- 青: +5
- 赤: +10
- 金: +15

## りんごの出現ロジック
- スコア < 20: 青のみ
- 20 <= スコア < 100: 赤が40%で混入
- スコア >= 100: 金10%、赤30%、残り青

## 進行
- 1フレームごとに落下・当たり判定を更新
- 落下速度: 2.2px / frame（約60fps想定）
- 移動速度: 4.6px / frame

## 画面・レイアウト
- ゲーム領域: 幅450px / 高さ300px
- プレイヤー: 幅56px / 高さ18px
- りんご: 28px 正方形
- UI表示:
  - 左上: ライフ（ハート3個）
  - 右上: スコア
  - 未開始/ゲームオーバー時: オーバーレイ表示

## 状態
- `ready`: 初期化済みか
- `started`: ゲーム開始済みか
- `gameOver`: 終了状態か
- `score`: 現在スコア
- `misses`: ミス回数
- `apple`: りんごの位置と種類
- `playerX`: プレイヤー位置

## 当たり判定
- りんご矩形とプレイヤー矩形のAABB衝突
- りんごがプレイヤーに当たるとキャッチ
- 画面下端に到達するとミス

## 非機能要件
- 描画は軽量でカクつかないこと
- 1ゲームの処理が複数回起動しないこと（多重起動防止）

## 主要実装箇所
- 画面/ロジック: `src/app/page.tsx`
